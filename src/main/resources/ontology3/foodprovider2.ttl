# D2RQ Namespace  
@prefix d2rq: <http://www.wiwiss.fu-berlin.de/suhl/bizer/D2RQ/0.1#> .

# Namespace of the ontology
@prefix nutritionassessment: <http://www.semanticweb.org/dorin/ontologies/nutritionassessment#> .
@prefix nutritionmonitoring: <http://www.semanticweb.org/dorin/ontologies/nutritionmonitoring#> .
@prefix nutritiondiagnostic: <http://www.semanticweb.org/dorin/ontologies/nutritiondiagnostic#> .
@prefix food: <http://www.semanticweb.org/dorin/ontologies/food#> .
@prefix foodprovider: <http://www.semanticweb.org/linabarakat/ontologies/2014/8/foodprovider#> .
@prefix nutritionassesment: <http://www.semanticweb.org/dorin/ontologies/nutritionassesment#> .

# Namespace of the mapping file; does not appear in mapped data
@prefix map: <#> .

# Other namespaces
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> . 
@prefix jdbc: <http://d2rq.org/terms/jdbc/> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .

map:database a d2rq:Database;
    d2rq:jdbcDSN "jdbc:mysql://localhost/toateretetele";
    d2rq:jdbcDriver "com.mysql.jdbc.Driver";
    d2rq:username "root";
    d2rq:password "";
    jdbc:autoReconnect "true";
	jdbc:zeroDateTimeBehavior "convertToNull";
	.
	
##############################################################
##################MEAL TYPE###################################
##############################################################
	
# Table meal_type
map:meal_type a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "http://www.semanticweb.org/linabarakat/ontologies/2014/8/foodprovider#@@meal_type.mealName@@";
	d2rq:class foodprovider:MealType;
	.

# Data Property mealTypeHasId
map:meal_type_mealId a d2rq:PropertyBridge;
    d2rq:belongsToClassMap map:meal_type;
    d2rq:property foodprovider:mealTypeHasId;
    d2rq:column "meal_type.mealId";
    d2rq:datatype xsd:integer;
	.
	
# Object property - subclass - MealType
map:meal_type_mealName a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:meal_type;
    d2rq:property rdf:type;
    d2rq:uriPattern "http://www.semanticweb.org/linabarakat/ontologies/2014/8/foodprovider#@@meal_type.mealName@@";   
    .	
   
##############################################################
######################DISH TYPE###############################
##############################################################

# Table dish_type
map:dish_type a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriSqlExpression "CONCAT('http://www.semanticweb.org/linabarakat/ontologies/2014/8/foodprovider#',REPLACE(dish_type.dishName,' ','_'))";
	d2rq:class foodprovider:DishType;
	.

# Data Property hasDishTypeId
map:dish_type_dishId a d2rq:PropertyBridge;
    d2rq:belongsToClassMap map:dish_type;
    d2rq:property foodprovider:dishTypeHasId;
    d2rq:column "dish_type.dishId";
    d2rq:datatype xsd:integer;
	.
	
# Object property - subclass - DishType
map:dish_type_dishName a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:dish_type;
    d2rq:property rdf:type;
    d2rq:uriSqlExpression "CONCAT('http://www.semanticweb.org/linabarakat/ontologies/2014/8/foodprovider#',REPLACE(dish_type.dishName,' ','_'))";
    .
    
    
##############################################################
#########################RECIPE###############################
##############################################################

# Table recipe
map:recipe a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "http://www.semanticweb.org/dorin/ontologies/nutritionassesment#Recipe@@recipe.recipeId@@";
	d2rq:class nutritionassesment:Recipe;
	.

# Data Property recipeHasId
map:recipe_recipeId a d2rq:PropertyBridge;
    d2rq:belongsToClassMap map:recipe;
    d2rq:property foodprovider:recipeHasId;
    d2rq:column "recipe.recipeId";
    d2rq:datatype xsd:integer;
	.	
	
# Data Property recipeHasName
map:recipe_name a d2rq:PropertyBridge;
    d2rq:belongsToClassMap map:recipe;
    d2rq:property foodprovider:recipeHasName;
    d2rq:column "recipe.name";
    d2rq:datatype xsd:string;
	.	
	
# Data Property recipeHasDescription
map:recipe_description a d2rq:PropertyBridge;
    d2rq:belongsToClassMap map:recipe;
    d2rq:property foodprovider:recipeHasDescription;
    d2rq:column "recipe.description";
    d2rq:datatype xsd:string;
	.

# Object Property recipeHasDishType
map:recipe_dishType a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:recipe;
	d2rq:property foodprovider:recipeHasDishType;
	d2rq:refersToClassMap map:dish_type;
	d2rq:join "recipe.dishType => dish_type.dishId";
	.

# Data Property recipeHasNumberOfServings
map:recipe_numberOfServings a d2rq:PropertyBridge;
    d2rq:belongsToClassMap map:recipe;
    d2rq:property foodprovider:recipeHasNumberOfServings;
    d2rq:column "recipe.numberOfServings";
    d2rq:datatype xsd:integer;
	.

##############################################################
##############MEAL RECIPE RELATION############################
##############################################################

# table meal_recipe_relation
map:meal_recipe_relation a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:recipe;
	d2rq:property foodprovider:recipeHasMealType;
	d2rq:refersToClassMap map:meal_type;
	d2rq:join "recipe.recipeId <= meal_recipe_relation.recipeId";
	d2rq:join "meal_recipe_relation.mealId =>meal_type.mealId";
	.
	
##############################################################
####################INGREDIENT################################
##############################################################

# Table food_descr
map:food_descr a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "http://www.semanticweb.org/linabarakat/ontologies/2014/8/foodprovider#Ingredient@@food_descr.ndb_no@@"; 
	d2rq:class foodprovider:Ingredient;
	.

# Data Property ingredientHasId
map:food_descr_ndb_no a d2rq:PropertyBridge;
    d2rq:belongsToClassMap map:food_descr;
    d2rq:property foodprovider:ingredientHasId;
    d2rq:column "food_descr.ndb_no";
    d2rq:datatype xsd:string;
	.	
	
# Data Property ingredientHasName
map:food_descr_long_desc a d2rq:PropertyBridge;
    d2rq:belongsToClassMap map:food_descr;
    d2rq:property foodprovider:ingredientHasName;
    d2rq:column "food_descr.long_desc";
    d2rq:datatype xsd:string;
	.	
	
# Data Property hasFoodGroupCode
map:food_descr_food_group_code a d2rq:PropertyBridge;
    d2rq:belongsToClassMap map:food_descr;
    d2rq:property foodprovider:hasFoodGroupCode;
    d2rq:column "food_descr.food_group_code";
    d2rq:datatype xsd:string;
	.	
	
##############################################################
####################BASIC FOOD################################
##############################################################

# Table food_group_descr
map:food_group_descr a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriSqlExpression "CONCAT('http://www.semanticweb.org/linabarakat/ontologies/2014/8/foodprovider#',REPLACE(food_group_descr.food_group_description,' ','_'))";
    d2rq:class nutritionassesment:BasicFood;
	.	
	
# Data Property hasFoodGroupCode
map:food_group_descr_food_group_code a d2rq:PropertyBridge;
    d2rq:belongsToClassMap map:food_group_descr;
    d2rq:property foodprovider:hasFoodGroupCode;
    d2rq:column "food_group_descr.food_group_code";
    d2rq:datatype xsd:string;
	.	
	
# Object property - subclass - BasicFood
map:food_group_descr_food_group_description a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:food_group_descr;
    d2rq:property rdf:type;
    d2rq:uriSqlExpression "CONCAT('http://www.semanticweb.org/linabarakat/ontologies/2014/8/foodprovider#',REPLACE(food_group_descr.food_group_description,' ','_'))";
    .
    
##############################################################
####################RELATION BASIC FOOD FOOD##################
##############################################################

# table relation_food_group_food
map:relation_food_group_food a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:food_descr;
	d2rq:property foodprovider:ingredientHasBasicFoodType;
	d2rq:refersToClassMap map:food_group_descr;
	d2rq:join "food_descr.ndb_no <= relation_food_group_food.ndb_no";
	d2rq:join "relation_food_group_food.food_group_code =>food_group_descr.food_group_code";
	.
	
##############################################################
####################RELATION NUTRIENT RECIPE##################
##############################################################

map:recipeHasProteins_g a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:recipe;
	d2rq:property foodprovider:recipeHasProteins_g;
    d2rq:column "nutrient_recipe_relation.Proteins(g)";
    d2rq:join "recipe.recipeId <= nutrient_recipe_relation.recipeId";
    d2rq:datatype xsd:double;
    .
    
map:recipeHasFats_g a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:recipe;
	d2rq:property foodprovider:recipeHasFats_g;
    d2rq:column "nutrient_recipe_relation.Lipids(g)";
    d2rq:join "recipe.recipeId <= nutrient_recipe_relation.recipeId";
    d2rq:datatype xsd:double;
    .
    
map:recipeHasCarbs_g a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:recipe;
	d2rq:property foodprovider:recipeHasCarbs_g;
    d2rq:column "nutrient_recipe_relation.Carbohydrates(g)";
    d2rq:join "recipe.recipeId <= nutrient_recipe_relation.recipeId";
    d2rq:datatype xsd:double;
    .
    
map:recipeHasEnergy_kcal a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:recipe;
	d2rq:property foodprovider:recipeHasEnergy_kcal;
    d2rq:column "nutrient_recipe_relation.Energy(kCal)";
    d2rq:join "recipe.recipeId <= nutrient_recipe_relation.recipeId";
    d2rq:datatype xsd:double;
    .
    
map:recipeHasIron_mg a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:recipe;
	d2rq:property foodprovider:recipeHasIron_mg;
    d2rq:column "nutrient_recipe_relation.Iron(mg)";
    d2rq:join "recipe.recipeId <= nutrient_recipe_relation.recipeId";
    d2rq:datatype xsd:double;
    .
    
map:recipeHasSodium_mg a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:recipe;
	d2rq:property foodprovider:recipeHasSodium_mg;
    d2rq:column "nutrient_recipe_relation.Sodium(mg)";
    d2rq:join "recipe.recipeId <= nutrient_recipe_relation.recipeId";
    d2rq:datatype xsd:double;
    .
    
map:recipeHasCalcium_mg a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:recipe;
	d2rq:property foodprovider:recipeHasCalcium_mg;
    d2rq:column "nutrient_recipe_relation.Calcium(mg)";
    d2rq:join "recipe.recipeId <= nutrient_recipe_relation.recipeId";
    d2rq:datatype xsd:double;
    .
    
map:recipeHasVitaminA_ug a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:recipe;
	d2rq:property foodprovider:recipeHasVitaminA_ug;
    d2rq:column "nutrient_recipe_relation.Vitamin_A(ug)";
    d2rq:join "recipe.recipeId <= nutrient_recipe_relation.recipeId";
    d2rq:datatype xsd:double;
    .
    
map:recipeHasVitaminD_ug a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:recipe;
	d2rq:property foodprovider:recipeHasVitaminD_ug;
    d2rq:column "nutrient_recipe_relation.Vitamin_D(ug)";
    d2rq:join "recipe.recipeId <= nutrient_recipe_relation.recipeId";
    d2rq:datatype xsd:double;
    .
    
map:recipeHasVitaminC_mg a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:recipe;
	d2rq:property foodprovider:recipeHasVitaminC_mg;
    d2rq:column "nutrient_recipe_relation.Vitamin_C(mg)";
    d2rq:join "recipe.recipeId <= nutrient_recipe_relation.recipeId";
    d2rq:datatype xsd:double;
    .
    
map:recipeHasVitaminB6_mg a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:recipe;
	d2rq:property foodprovider:recipeHasVitaminB6_mg;
    d2rq:column "nutrient_recipe_relation.Vitamin_B6(mg)";
    d2rq:join "recipe.recipeId <= nutrient_recipe_relation.recipeId";
    d2rq:datatype xsd:double;
    .

##############################################################
##############INGREDIENT RECIPE RELATION######################
##############################################################

# table recipe_food_relation
map:recipe_food_relation a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:recipe;
	d2rq:property foodprovider:recipeHasIngredient;
	d2rq:refersToClassMap map:food_descr;
	d2rq:join "recipe.recipeId <= recipe_food_relation.recipeId";
	d2rq:join "recipe_food_relation.ndb_no =>food_descr.ndb_no";
	.















##############################################################
###########################DISH###############################
##############################################################

# Table dish
map:dish a d2rq:ClassMap;
    d2rq:dataStorage map:database;
    d2rq:uriPattern "http://www.semanticweb.org/dorin/ontologies/nutritionassesment#Dish@@dish.dishId@@";
    d2rq:class nutritionassesment:Dish;
    .

# Data Property dishHasId
map:dish_dishId a d2rq:PropertyBridge;
    d2rq:belongsToClassMap map:dish;
    d2rq:property foodprovider:dishHasId;
    d2rq:column "dish.dishId";
    d2rq:datatype xsd:integer;
    .   

# Object Property dishHasDishType
map:dish_dishType a d2rq:PropertyBridge;
    d2rq:belongsToClassMap map:dish;
    d2rq:property foodprovider:dishHasDishType;
    d2rq:refersToClassMap map:dish_type;
    d2rq:join "dish.dishTypeId => dish_type.dishId";
    .

# Object Property dishHasRecipe
map:dish_recipe a d2rq:PropertyBridge;
    d2rq:belongsToClassMap map:dish;
    d2rq:property foodprovider:dishHasRecipe;
    d2rq:refersToClassMap map:recipe;
    d2rq:join "dish.recipeId => recipe.recipeId";
    .







##############################################################
###########################MEAL_VARIANT#######################
##############################################################

# Table meal_variant
map:meal_variant a d2rq:ClassMap;
    d2rq:dataStorage map:database;
    d2rq:uriPattern "http://www.semanticweb.org/dorin/ontologies/nutritionassesment#MealVariant@@meal_variant.mealVariantId@@";
    d2rq:class nutritionassesment:MealVariant;
    .

# Data Property mealVariantHasId
map:meal_variant_mealVariantId a d2rq:PropertyBridge;
    d2rq:belongsToClassMap map:meal_variant;
    d2rq:property foodprovider:mealVariantHasId;
    d2rq:column "meal_variant.mealVariantId";
    d2rq:datatype xsd:integer;
    .   

# Object Property mealVariantHasMealType
map:meal_variant_mealTypeId a d2rq:PropertyBridge;
    d2rq:belongsToClassMap map:meal_variant;
    d2rq:property foodprovider:mealVariantHasMealType;
    d2rq:refersToClassMap map:meal_type;
    d2rq:join "meal_variant.mealTypeId => meal_type.mealId";
    .

##############################################################
##############MEAL_VARIANT_DISH_RELATION######################
##############################################################

# table meal_recipe_relation
map:mealvariant_dish_relation a d2rq:PropertyBridge;
    d2rq:belongsToClassMap map:meal_variant;
    d2rq:property foodprovider:mealVariantHasDish;
    d2rq:refersToClassMap map:dish;
    d2rq:join "meal_variant.mealVariantId <= mealvariant_dish_relation.mealVariantId";
    d2rq:join "mealvariant_dish_relation.dishId =>dish.dishId";
    .




##############################################################
###########################MENU###############################
##############################################################

# Table menu
map:menu a d2rq:ClassMap;
    d2rq:dataStorage map:database;
    d2rq:uriPattern "http://www.semanticweb.org/dorin/ontologies/nutritionassesment#Menu@@menu.menuId@@";
    d2rq:class nutritionassesment:Menu;
    .

# Data Property menuHasId
map:menu_menuId a d2rq:PropertyBridge;
    d2rq:belongsToClassMap map:menu;
    d2rq:property foodprovider:menuHasId;
    d2rq:column "menu.menuId";
    d2rq:datatype xsd:integer;
    .  

# Object Property menuHasMealType
map:menu_mealTypeId a d2rq:PropertyBridge;
    d2rq:belongsToClassMap map:menu;
    d2rq:property foodprovider:menuHasMealType;
    d2rq:refersToClassMap map:meal_type;
    d2rq:join "menu.mealTypeId => meal_type.mealId";
    .

##############################################################
##############MENU_MEALVARIANT_RELATION#######################
##############################################################

# table menu_mealvariant_relation
map:menu_mealvariant_relation a d2rq:PropertyBridge;
    d2rq:belongsToClassMap map:menu;
    d2rq:property foodprovider:menuHasMealVariant;
    d2rq:refersToClassMap map:meal_variant;
    d2rq:join "menu.menuId <= menu_mealvariant_relation.menuId";
    d2rq:join "menu_mealvariant_relation.mealVariantId =>meal_variant.mealVariantId";
    .


##############################################################
####################GEOGRAPHICAL_AREA#########################
##############################################################

# Table geographical_area
map:geographical_area a d2rq:ClassMap;
    d2rq:dataStorage map:database;
    d2rq:uriPattern "http://www.semanticweb.org/dorin/ontologies/nutritionassesment#GeographicalArea@@geographical_area.geographicalAreaId@@";
    d2rq:class nutritionassesment:GeographicalArea;
    .

# Data Property geographicalAreaHasId
map:geographical_area_geographicalAreaId a d2rq:PropertyBridge;
    d2rq:belongsToClassMap map:geographical_area;
    d2rq:property foodprovider:geographicalAreaHasId;
    d2rq:column "geographical_area.geographicalAreaId";
    d2rq:datatype xsd:integer;
    .  

# Data Property geographicalAreaHasCountry
map:geographical_area_country a d2rq:PropertyBridge;
    d2rq:belongsToClassMap map:geographical_area;
    d2rq:property foodprovider:geographicalAreaHasCountry;
    d2rq:column "geographical_area.country";
    d2rq:datatype xsd:string;
    .  

# Data Property geographicalAreaHasCity
map:geographical_area_city a d2rq:PropertyBridge;
    d2rq:belongsToClassMap map:geographical_area;
    d2rq:property foodprovider:geographicalAreaHasCity;
    d2rq:column "geographical_area.city";
    d2rq:datatype xsd:string;
    .  

# Data Property geographicalAreaHasRegion
map:geographical_area_region a d2rq:PropertyBridge;
    d2rq:belongsToClassMap map:geographical_area;
    d2rq:property foodprovider:geographicalAreaHasRegion;
    d2rq:column "geographical_area.region";
    d2rq:datatype xsd:string;
    .   



##############################################################
##################FOOD_SERVICE_PROVIDER#######################
##############################################################

# Table food_service_provider
map:food_service_provider a d2rq:ClassMap;
    d2rq:dataStorage map:database;
    d2rq:uriPattern "http://www.semanticweb.org/dorin/ontologies/nutritionassesment#FoodServiceProvider@@food_service_provider.foodProviderId@@";
    d2rq:class nutritionassesment:FoodServiceProvider;
    .

# Data Property foodProviderHasID
map:food_service_provider_foodProviderId a d2rq:PropertyBridge;
    d2rq:belongsToClassMap map:food_service_provider;
    d2rq:property foodprovider:foodProviderHasID;
    d2rq:column "food_service_provider.foodProviderId";
    d2rq:datatype xsd:integer;
    .  

# Data Property foodProviderHasName
map:food_service_provider_name a d2rq:PropertyBridge;
    d2rq:belongsToClassMap map:food_service_provider;
    d2rq:property foodprovider:foodProviderHasName;
    d2rq:column "food_service_provider.name";
    d2rq:datatype xsd:string;
    .  

# Object Property foodProviderHasGeographicalArea
map:food_service_provider_geographicalAreaId a d2rq:PropertyBridge;
    d2rq:belongsToClassMap map:food_service_provider;
    d2rq:property foodprovider:foodProviderHasGeographicalArea;
    d2rq:refersToClassMap map:geographical_area;
    d2rq:join "food_service_provider.geographicalAreaId => geographical_area.geographicalAreaId";
    .

##############################################################
#############MENU_FOODPROVIDER_RELATION#######################
##############################################################

# table menu_foodprovider_relation
map:menu_foodprovider_relation a d2rq:PropertyBridge;
    d2rq:belongsToClassMap map:menu;
    d2rq:property foodprovider:menuHasFoodProvider;
    d2rq:refersToClassMap map:food_service_provider;
    d2rq:join "menu.menuId <= menu_foodprovider_relation.menuId";
    d2rq:join "menu_foodprovider_relation.foodProviderId =>food_service_provider.foodProviderId";
    .


